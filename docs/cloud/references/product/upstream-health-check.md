---
title: Upstream Health Check Reference
reading_time: auto
show_feedback: true
---

## Active Health Check

| Field                              | Type             | Default                                                                                             | Optional | Limitations                                                                                           | Description                                                                                           |
|------------------------------------|------------------|-----------------------------------------------------------------------------------------------------|----------|-------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------|
| `Type`                             | string           | -                                                                                                   | No       | Optional Values: `"HTTP"`, `"HTTPS"`, `"TCP"`                                                         | Active health check probe type.                                                                       |
| `Probe Timeout`                    | integer          | `1`                                                                                                 | Yes      | `> 0`                                                                                                 | Probe request timeout (in seconds).                                                                   |
| `Concurrent Probes`                | integer          | `10`                                                                                                | Yes      | `> 0`                                                                                                 | The number of targets can be probed concurrently.                                                     |
| `Probe Target Port`                | integer          | -                                                                                                   | Yes      | `[1, 65535]`                                                                                          | By default, the port is the same as the one defined in the Upstream target.                           |
| `HTTP Probe Host`                  | string           | -                                                                                                   | Yes      | This field is only useful when `Type` is `HTTP` or `HTTPS`                                            | The HTTP Host header in HTTP probe requests. By default, it's the domain or IP address of the target. |
| `HTTP Probe Path`                  | string           | `10`                                                                                                | Yes      | This field is only useful when `Type` is `HTTP` or `HTTPS`                                            | The HTTP path in HTTP probe requests.                                                                 |
| `HTTP Probe Headers`               | object           | -                                                                                                   | Yes      | This field is only useful when `Type` is `HTTP` or `HTTPS`                                            | Extra HTTP headers. These headers will be carried when sending HTTP probe requests.                   |
| `Verify Target TLS Certificate`    | boolean          | `false`                                                                                             | Yes      | This field is only useful when `Type` is `HTTPS`                                                      | Whether to verify the target's TLS certificate.                                                       |
| `Healthy Targets Check Interval`   | integer          | `1`                                                                                                 | Yes      | `> 0`                                                                                                 | The time interval (in seconds) for checking healthy targets.                                          |
| `Healthy HTTP Status Codes`        | array of integer | `[200, 302]`                                                                                        | Yes      | `200 <= item <= 599` and items are unique. This field is only useful when `Type` is `HTTP` or `HTTPS` | A list of HTTP status codes. It's used for checking if an HTTP probe request is successful.           |
| `Healthy Successes`                | integer          | `2`                                                                                                 | Yes      | `> 0`. This field is only useful when `Type` is `HTTP` or `HTTPS`                                     | The number of successful probes to consider a target is healthy.                                      |
| `Unhealthy Targets Check Interval` | integer          | `1`                                                                                                 | Yes      | `> 0`                                                                                                 | The time interval (in seconds) for checking unhealthy targets.                                        |
| `Unhealthy HTTP Status Codes`      | array of integer | `[404, 500, 501, 502]`                                                                              | Yes      | `200 <= item <= 599` and items are unique. This field is only useful when `Type` is `HTTP` or `HTTPS` | A list of HTTP status codes. It's used for checking if an HTTP probe request is failed.               |
| `Unhealthy HTTP Failures`          | integer          | `5`                                                                                                 | Yes      | `> 0`. This field is only useful when `Type` is `HTTP` or `HTTPS`                                     | The number of HTTP-related failures to consider a target is unhealthy.                                |
| `Unhealthy TCP Failures`           | integer          | `2`                                                                                                 | Yes      | `> 0`. This field is only useful when `Type` is `TCP`                                                 | The number of TCP-related failures to consider a target is unhealthy.                                 |
| `Unhealthy Timeouts`               | integer          | `3`                                                                                                 | Yes      | `> 0`. This field is only useful when `Type` is `HTTP` or `HTTPS`                                     | The number of probe timeouts to consider a target is unhealthy.                                       |

## Passive Health Check

| Field                         | Type             | Default                                                                                           | Optional | Limitations                                                                                           | Description                                                                           |
|-------------------------------|------------------|---------------------------------------------------------------------------------------------------|----------|-------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------|
| `Type`                        | string           | -                                                                                                 | No       | Optional Values: `"HTTP"`, `"HTTPS"`, `"TCP"`                                                         | Passive health check type.                                                            |
| `Healthy HTTP Status Codes`   | array of integer | `[200, 201, 202, 203, 204, 205, 206, 207, 208, 226, 300, 301, 302, 303, 304, 305, 306, 307, 308]` | Yes      | `200 <= item <= 599` and items are unique. This field is only useful when `Type` is `HTTP` or `HTTPS` | A list of HTTP status codes. It's used for checking if an HTTP request is successful. |
| `Unhealthy HTTP Status Codes` | array of integer | `[429 500 503]`                                                                                   | Yes      | `200 <= item <= 599` and items are unique. This field is only useful when `Type` is `HTTP` or `HTTPS` | A list of HTTP status codes. It's used for checking if an HTTP request is failed.     |
| `Unhealthy HTTP Failures`     | integer          | `5`                                                                                               | Yes      | `> 0`. This field is only useful when `Type` is `HTTP` or `HTTPS`                                     | The number of HTTP-related failures to consider a target is unhealthy.                |
| `Unhealthy TCP Failures`      | integer          | `2`                                                                                               | Yes      | `> 0`. This field is only useful when `Type` is `TCP`                                                 | The number of TCP-related failures to consider a target is unhealthy.                 |
| `Unhealthy Timeouts`          | integer          | `3`                                                                                               | Yes      | `> 0`. This field is only useful when `Type` is `HTTP` or `HTTPS`                                     | The number of probe timeouts to consider a target is unhealthy.                       |
